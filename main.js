(()=>{var t={937:()=>{function t(t){alert("Bienvenido "+t+"!")}var e=sessionStorage.getItem("saludado")||"";null==localStorage.nombre?$(window).on("load",(function(){$("#modalRegistro").modal("show")})):"yes"!=e&&(t(localStorage.nombre),sessionStorage.setItem("saludado","yes")),$("#btnRegistro").on("click",(function(){var e=document.querySelector("#nombreUsuario"),o=document.querySelector("#emailUsuario");!function(t,e){localStorage.nombre=t,localStorage.mail=e}(e.value,o.value),t(e.value)}))}},e={};function o(r){var n=e[r];if(void 0!==n)return n.exports;var a=e[r]={exports:{}};return t[r](a,a.exports,o),a.exports}o.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{"use strict";var t={};o.r(t),o(937);const e=document.querySelector("#carrito"),r=document.querySelector("#lista-productos");$(e).on("click",(function(t){if(t.target.classList.contains("borrar-producto")){const e=t.target.getAttribute("data-id");a=a.filter((t=>t.id!==e)),c(),i()}}));const n=document.querySelector("#listado-carrito tbody");document.querySelector("#carrito-checkout tbody");let a=[];function c(){d(),a.forEach((t=>{const{nombre:e,imagen:o,precio:r,cantidad:a,id:c}=t,i=document.createElement("tr");i.innerHTML=`\n\t\t\t<td>\n\t\t\t\t<img class="img-carrito" src="${o}" width=100>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t${e}\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t${r}\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t${a}\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<a href="#" class="borrar-producto" data-id="${c}"> X </a>\n\t\t\t</td>\n\t\t\t\n\t\t`,n.appendChild(i)})),i()}function i(){localStorage.setItem("carrito",JSON.stringify(a))}function d(){for(;n.firstChild;)n.removeChild(n.firstChild)}document.addEventListener("DOMContentLoaded",(()=>{a=JSON.parse(localStorage.getItem("carrito"))||[],c()})),$("#vaciar-carrito").click((function(){d(),a=[],i()})),$("#btn-buy").click((function(){d(),a=[],i()})),$(r).on("click",(function(t){t.preventDefault(),t.target.classList.contains("agregar-carrito")&&function(t){const e={imagen:t.querySelector("img").src,nombre:t.querySelector(".nombre").textContent,precio:t.querySelector(".precio").textContent,id:t.querySelector("button").getAttribute("data-id"),cantidad:1};if(a.some((t=>t.id===e.id))){const t=a.map((t=>t.id===e.id?(t.cantidad++,t.precio="$"+Number(e.precio.slice(1))*t.cantidad,t):t));a=[...t]}else a=[...a,e];c()}(t.target.parentElement.parentElement.parentElement)}));const s=[];document.addEventListener("DOMContentLoaded",(()=>{a.forEach((t=>{var{nombre:e,imagen:o,precio:r,cantidad:n,id:a}=t;r=r.replace("$",""),s.push(parseInt(r));var c,i=0;for(let t of s)i+=t;$("#totalCarrito").html(i),c=i,$("#tres-cuotas").html("3 cuotas sin interés de $ "+parseInt(c/3)),$("#seis-cuotas").html("6 cuotas sin interés de $ "+parseInt(c/6)),$("#doce-cuotas").html("12 cuotas sin interés de $ "+parseInt(c/12))}))}));const l=document.getElementById("carrito-checkout tbody");let u=[];document.addEventListener("DOMContentLoaded",(()=>{u=JSON.parse(t.default)||[],u.forEach((t=>{const{nombre:e,imagen:o,precio:r,cantidad:n,id:a}=t;document.createElement("tr").innerHTML=`\n\t\t\t<td>\n\t\t\t\t<img class="img-carrito" src="${o}" width=100>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t${e}\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t${r}\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t${n}\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<a href="#" class="borrar-producto" data-id="${a}"> X </a>\n\t\t\t</td>\n\t\t\t\n\t\t`,l.appendChild()}))})),$("body").on("submit",".finalizarCompraForm",(function(t){let e=t.target[0].value,o=t.target[1].value,r=t.target[2].value,n=t.target[3].value.replaceAll("_"," Cuotas de: $"),a=t.target[4].value,c=t.target[5].value,i=t.target[6].value,d=t.target[7].value,s=t.target[8].value;""==e||""==o||""==r||""==a||""==c||""==i||""==d||""==s?alert("No ingresaste los datos solicitados! Intentalo de nuevo completando todos los campos"):$.ajax({url:"https://jsonplaceholder.typicode.com/posts",type:"POST",data:{nombre:e,email:o,tel:r,cuotas:n,creditCardNumber:a,creditCardName:c,creditCardCVC:i,creditCardDesde:d,credictCardHasta:s},beforeSend:function(){$("#tajeta-checkout").hide()},success:function(t){m(t)}})}));let m=t=>{let e=t.creditCardNumber.substr(16),o=`\n        <div class="col-md-12">\n            <h1>¡Gracias por elegirnos ${t.nombre}!</h1>\n            <p><strong>El pago fue realizado con éxito con la tarjeta número: **** - **** - **** - ${e}</strong></p>\n            <p>Corroborá las instrucciones de retiro en tu correo: <strong>${t.email}</strong></p>\n        </div>\n    `;$("#card-success").append(o),$("#card-success").show()};class p{constructor(t,e,o,r){this.id=t,this.nombre=e,this.precio=parseFloat(o),this.stock=parseInt(r)}}const g=[];$(document).ready((()=>{$.getJSON("productos.json",(function(t){$.each(t.productos,(function(){new p(`${this.id}`,`${this.nombre}`,`${this.precio}`,`${this.stock}`),g.push(this)}))}))}))})()})();